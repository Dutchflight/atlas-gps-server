{"name":"Atlas-gps-server","tagline":"OpenSource GPS tracker system (monitoring) from user nick \"Mars\"","body":"﻿### Описание\r\nЭтот сервер был разработан не мной, а одним хорошим человеком под ником Mars. Разработчик был не против свободного распространения и изменения исходников без лицензии.\r\nЭта версия работает, но может вылетать из-за отсутствия валидации приходящих ложных или ошибочных пакетов. Любой неправильный запрос приведет к ошибке. Над этим нужно работать далее.. \r\n\r\n![](https://lh4.googleusercontent.com/-VGSeqHLH1pA/U61bmLLtodI/AAAAAAAAyXY/4VxkTXrWsws/w1152-h597-no/11111111.jpg)\r\n\r\n#### Порядок установки и работы\r\n\r\n1. Установить базу данных MySql. \r\n2. Импортировать в базу таблицы из фала nodemonitor.sql в в папке MySQL Должны создаться база данных nodemonitor в ней две таблицы -> log  и user\r\n\r\nИли создать вручную базу \"nodemonitor\"\r\n\r\n```js\r\nlog ->\r\nCREATE TABLE IF NOT EXISTS `log` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `imei` text,\r\n  `lat` text NOT NULL,\r\n  `lng` text NOT NULL,\r\n  `speed` int(11) NOT NULL,\r\n  `datetime` text NOT NULL,\r\n  `zaryad` text NOT NULL,\r\n  `azimuth` int(11) NOT NULL,\r\n  `sputnik` int(2) NOT NULL,\r\n  `tc` text NOT NULL,\r\n  `params` text NOT NULL,\r\n  `sourcedata` text NOT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=104;\r\n```\r\n\r\n```js\r\nuser ->\r\nCREATE TABLE IF NOT EXISTS `user` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `name` text NOT NULL,\r\n  `pass` text NOT NULL,\r\n  `key` text NOT NULL,\r\n  `options` text NOT NULL,\r\n  `device` text NOT NULL,\r\n  `tracks` text NOT NULL,\r\n  PRIMARY KEY (`id`)\r\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ;\r\n```\r\n\r\n#### Установить Node.js отсюда: http://nodejs.org/\r\n\r\nВойти в черный экран (для виндовс Пуск -> Выполнить  : Набрать в окошке cmd и нажать Ok)<br>\r\nПерейти в директорию куда вы разархивировали проект   D: ввод <br>\r\nD:\\>  cd ./atlas/webserver   ввод (или клавиша энтер ее называют)<br>\r\nДолжно получится <br>\r\nD:\\> atlas/webserver >   <br>\r\n\r\nДалее в этой строчке набираете  D:\\> atlas/webserver >   node web-server.js<br>\r\nНа этом этапе должна быть ошибка .. много надписей. В самом ER_ACCESS_DENITED_ERROR  бла бла… <br>\r\n\r\nЭто значит что сервер не может подсоединиться к базе данных. В файле папка webserver Фалик web-config.json <br>\r\n\r\n```js\r\n{\r\n\t\"port\": 5000,   \r\n\t\"public\" : \"../public\",  \r\n\t\"mysql\": {\r\n\t\t\"host\":\"localhost\",\r\n\t\t\"user\":\"admin\",\t\t//\"admin\"  пользователь который имеет право подключиться к базе (часто это root)\r\n\t\t\"password\":\"pass_from_database\",\t//\"password\"  пароль от этой базы данных. В нашем случае от базы nodemonitoring  меняете на свой\r\n\t\t\"database\":\"nodemonitor\"\t//\"database\"  сама наша база (ее имя)\r\n\t}\r\n}\r\n```\r\n\r\nВам надо добиться чтобы при запуске сервер (выполнения команды в командной строке node web-server.js ) выдал сделующие строки:\r\n```js\r\ncontrollers add\r\nServer listening on: 5000\r\nGPSMarker listening 3128\r\nGpsLogger listening 10100\r\nGpsGate listening 10005\r\nProfiler listening on 0.0.0.0:3131\r\n```\r\n\r\nЕсли удалось завести таблицы и стартовать сервер, открываем браузер и переходим по адресу<br>\r\nhttp://localhost:5000<br>\r\n5000 – это  \"port\": 5000,   web-config.json (вы можете изменить на любой другой свободный у вас порт к примеру: 80)\r\n\r\nЕсли вы создавали таблицу в базе данных импортом, то по умолчанию можно войти под\r\n\r\nlogin: demo<br>\r\npass:  demo\r\n\r\nСервер неустойчиво, но работает для GPS Logger for Android \r\n\r\nhttps://play.google.com/store/apps/details?id=com.mendhak.gpslogger&hl=ru\r\n\r\nЕго настроки:<br>\r\nНастройки -> Автоматическая отрпавка – OpenGTS настройка<br>\r\nВключить OpenGTS  -> галка<br>\r\nВключить автоматическую отправку координат -> галка<br>\r\nСервер -> ip вашего сервера (нужно узнать ip вашего компьютера например по ссылке http://2ip.ru/ )<br>\r\nПорт  - > 10100 (по умолчанию у меня забито среди кода)<br>\r\nИдентификатор устройства – > 123456789012345  (по умолчанию для пользователя: demo пароль: demo)<br>\r\n\r\nНа этом этапе должно уже работать. \r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}